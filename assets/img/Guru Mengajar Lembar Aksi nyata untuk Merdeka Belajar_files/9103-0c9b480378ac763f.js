(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9103],{83759:function(a,e,i){"use strict";i.d(e,{Ru:function(){return h},UR:function(){return u},V0:function(){return m},yc:function(){return x}});var t=i(47568),n=i(51438),r=i(28668),s=i(25171),l=i(70655),d=i(88767),c=i(71529),o=function(a){(0,r.Z)(i,a);var e=(0,s.Z)(i);function i(a,t){return(0,n.Z)(this,i),e.call(this,{title:"Tidak Dapat Ditampilkan",description:"Anda tidak memiliki akses untuk melihat Aksi Nyata milik guru lain.",apiPath:a,originalError:t})}return i}(i(97512).sH);function u(a){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(0,d.useInfiniteQuery)(["aksinyata-infinite-query"],(e=(0,t.Z)(function(e){var t,n;return(0,l.__generator)(this,function(r){return n=void 0===(t=e.pageParam)?{updatedAtUnix:a,limit:i}:t,[2,(0,c.hi)("/microlearnings/aksi-nyata-validations",{params:n})]})}),function(a){return e.apply(this,arguments)}),{select:function(a){return{pages:a.pages.map(function(a){return{data:a.data.map(function(a){var e,i=a.id,t=a.title,n=a.creator;return{id:i,title:t,creator:n,topicId:a.topicId,topicName:a.topicName}}),meta:{}}}),pageParams:a.pageParams}},getNextPageParam:function(a){return a.data.length>0?{updatedAtUnix:a.data[a.data.length-1].updatedAtUnix,limit:i}:void 0}})}function h(a){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return(0,c.Zy)("/microlearnings/aksi-nyata/".concat(a),{queryConfig:{enabled:!!a&&e},errorHandlerFn:function(a,e,i){(0,c.CI)(null!=a?a:500,e,i)}})}function m(a){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,c.Zy)("/microlearnings/aksi-nyata/".concat(a,"/feedbacks"),{queryConfig:{enabled:!!a&&e,useErrorBoundary:!1},errorHandlerFn:function(a,e,i){if(401===a)throw new o(e,i);(0,c.CI)(a,e,i)}})}function x(a,e){return(0,c.fy)("/microlearnings/aksi-nyata/".concat(a,"/feedbacks"),{mutationConfig:e,axiosConfig:{method:"POST"}})}},69103:function(a,e,i){"use strict";i.r(e),i.d(e,{AksiNyataList:function(){return R}});var t=i(828),n=i(29815),r=i(85893),s=i(17673),l=i(11163),d=i(67294),c=i(9008),o=i.n(c),u=i(29106),h=i(88767),m=i(86010),x=i(21958),f=i(54204),v=i(89004),g=i(42586),p=i(28058),y=i(55231),j=i(7379),k=i(58570),N=i.n(k),b=function(){return(0,r.jsxs)("div",{className:(0,m.Z)(N()["aksi-nyata-item-card"],"py-3 mb-3 last:mb-0 px-3 mx-3"),children:[(0,r.jsx)("div",{className:"border-b border-gray-20 -mx-3 px-3 pb-3",children:(0,r.jsx)(p.q,{style:{width:"50%"},height:16})}),(0,r.jsx)(p.q,{className:"my-3",style:{width:"100%"},height:16}),(0,r.jsxs)("div",{className:"relative flex gap-3",children:[(0,r.jsx)("div",{className:"flex-grow-0 flex-shrink-0 w-[24px] h-[24px] rounded overflow-hidden",children:(0,r.jsx)(p.q,{rounded:!0,height:24,width:24})}),(0,r.jsx)("div",{className:"flex-grow-1 w-full mr-3",children:(0,r.jsx)(p.q,{className:"mt-1",height:16,style:{width:"30%"}})})]})]})},_=function(a){var e=a.href,i=a.title,t=a.email,n=a.avatarUrl,s=a.author,l=a.school,d=a.topicName,c=a.aksiNyataId,o=a.order,u=a.active,h=function(){(0,j.l)({eventName:"learning_activity",eventParams:{event_trigger:"aksinyata_list_page",action_type:"click_aksinyata_from_list",meta:JSON.stringify({aksi_nyata_id:c,order:o})},sendDefaultParams:!0})};return(0,r.jsxs)("div",{className:(0,m.Z)("relative mb-3 last:mb-0",N()["aksi-nyata-item-card"],void 0!==u&&u?"border-primary bg-blue-10 rounded-t":"bg-white"),children:[(0,r.jsxs)(v.x,{className:"border-b border-gray-20 py-2 px-3",variant:"helper",color:"subdued",children:["Topik: ",d]}),(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsx)(y.e,{href:e,children:(0,r.jsx)(v.x,{onClick:h,variant:"heading-sm",className:"overlay-link",as:"a",href:e,"data-testid":"aksinyata-item-card",children:i})}),(0,r.jsxs)("div",{className:"flex mt-1 items-center",children:[(0,r.jsx)("div",{className:"mr-3",children:(0,r.jsx)(g.q,{src:void 0===n?void 0:n,alt:s,name:s&&s.length>0?s:"guru",size:"sm"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(v.x,{variant:"body-sm",children:s&&s.length>0?s:t}),!!l&&(0,r.jsx)(v.x,{variant:"helper",color:"subdued",children:l})]})]})]})]})},P=i(83759),I=i(99270),w=i(18046),A=i(30469),Z=i(42979),C=i(26412),F=i(10418),U=i(70314),q=i.n(U),z=function(a){var e=a.src,i=(0,d.useState)(!1),t=i[0],n=i[1];return(0,r.jsxs)(r.Fragment,{children:[!t&&(0,r.jsx)("div",{className:"w-full aspect-[567/424]",children:(0,r.jsx)(p.q,{width:"100%",height:"330px"})}),(0,r.jsx)("img",{alt:"featured aksi nyata",className:(0,m.Z)("w-full aspect-[567/424] object-center object-cover",t?"min-h-[330px]":"h-0"),src:e,onLoad:function(){n(!0)},loading:"lazy","data-testid":"aksinyata-featured-card-image"})]})},S=function(a){var e=a.topic,i=a.href,t=a.author,n=a.school,s=a.aksiNyataId,l=a.title,d=a.image,c=a.avatarUrl,o=function(){(0,j.l)({eventName:"learning_activity",eventParams:{event_trigger:"topic_list_page_with_aksinyata",action_type:"click_curated_list",meta:JSON.stringify({aksi_nyata_id:s,is_variant:1})},sendDefaultParams:!0})};return(0,r.jsxs)(C.Zb,{as:"a",href:i,className:q()["aksi-nyata-featured-card"],onClick:o,"data-testid":"aksinyata-featured-card",children:[(0,r.jsxs)("div",{className:"relative overflow-hidden rounded sm:rounded-lg",children:[(0,r.jsx)(F.C,{variant:"informational",className:"absolute left-4 top-4",children:"Pilihan Aksi Nyata Minggu Ini"}),(0,r.jsx)(z,{src:d})]}),(0,r.jsxs)(C.eW,{className:"absolute bottom-0 left-0 right-0 opacity-95 border-subdued bg-expressive-dark-blue rounded-b sm:rounded-b-lg",children:[(0,r.jsxs)(v.x,{className:"mb-0.5",variant:"helper",color:"inverse-subdued",children:["Topik: ",e]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(v.x,{variant:"heading-sm",className:"overlay-link",color:"inverse",children:l}),(0,r.jsxs)("div",{className:"flex items-center mt-1",children:[(0,r.jsx)("div",{className:"mr-3",children:(0,r.jsx)(g.q,{src:c,alt:t,name:t&&t.length>0?t:"guru",size:"sm"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(v.x,{variant:"body-sm",color:"inverse",children:t&&t.length>0?t:""}),!!n&&(0,r.jsx)(v.x,{variant:"helper",color:"inverse-subdued",children:n})]})]})]})]})]})},D=i(98743),T=i.n(D),L=function(a){var e,i=T()(),t=T()(null===(e=a.sort(function(a,e){return new Date(e.date).getTime()-new Date(a.date).getTime()}).find(function(a){var e=a.date;return T()(e).isSame(i,"date")||T()(e).isBefore(i,"date")}))||void 0===e?void 0:e.date);return a.find(function(a){var e=a.date;return T()(e).isSame(t,"date")})},M=i(34155),E=function(){var a=(0,Z.q8)(Z.QK.FeaturedAksiNyata),e=a.data,i=a.status,t=L((null==e?void 0:e.data)||[]);return(0,r.jsxs)("div",{className:"rounded-b-xl bg-white pb-3 mb-4",children:[(0,r.jsx)(v.x,{className:(0,m.Z)("bg-white px-4 pt-4","success"===i&&!!t&&"pb-4 mb-3"),variant:"action",children:"Lihat penerapan materi Pelatihan Mandiri oleh para rekan guru lewat Aksi Nyata yang sudah tervalidasi."}),(0,r.jsx)("div",{children:"success"===i&&!!t&&(0,r.jsx)(S,{href:"/".concat(M.env.NEXT_PUBLIC_TEMP_PELATIHAN_MANDIRI_PATH||"pelatihan-mandiri","/aksi-nyata/").concat(t.aksiNyataId,"?")+(0,s.stringify)({topik_id:t.topicId,topik_name:t.topicName}),aksiNyataId:t.aksiNyataId,author:t.author,image:t.thumbnailUrl,title:t.title,topic:t.topicName,avatarUrl:t.avatarUrl})})]})},J=i(28873),R=function(a){var e=a.isDesktop,i=(0,P.UR)(),c=(0,l.useRouter)(),g=(0,t.Z)((0,u.S)(),2),p=g[0],y=g[1].entry,j=y&&y.isIntersecting,k=(0,h.useQueryClient)(),N=(0,J._)().safeReplace,Z=function(){k.resetQueries(["aksinyata-infinite-query"])};d.useEffect(function(){j&&!i.isFetchingNextPage&&i.hasNextPage&&i.fetchNextPage()},[i,j]);var C=function(){return(0,r.jsx)(r.Fragment,{children:"loading"===i.status&&(0,n.Z)([,,,,]).map(function(a,e){return(0,r.jsx)(b,{},e)})})},F=function(){return(0,r.jsx)(r.Fragment,{children:!i.hasNextPage&&(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("div",{className:"mb-4 border border-subdued rounded-lg bg-surface-subdued overflow-hidden",children:(0,r.jsxs)("div",{className:"flex items-center px-4 py-2",children:[(0,r.jsx)(x.J,{className:"mr-2",as:"i",color:"default",fontSize:"small",children:"error"}),(0,r.jsx)(v.x,{variant:"body-sm",as:"span",children:(0,r.jsx)("strong",{children:"Anda telah melihat semua Aksi Nyata"})})]})})})})};if(void 0!==e&&e){if(!c.query.id){var U,q,z=null===(q=null===(U=i.data)||void 0===U?void 0:U.pages[0])||void 0===q?void 0:q.data[0];z&&N({pathname:"/pelatihan-mandiri/aksi-nyata/".concat(null==z?void 0:z.id),query:{topik_name:null==z?void 0:z.topicName,topik_id:null==z?void 0:z.topicId}})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:"Pelatihan Mandiri | Daftar Aksi Nyata"})}),(0,r.jsxs)("div",{className:"mt-[100px]",children:[(0,r.jsxs)("div",{className:"px-4",children:[(0,r.jsx)(v.x,{variant:"display-sm",className:"mb-4",children:"Aksi Nyata Rekan Guru"}),(0,r.jsx)(E,{})]}),(0,r.jsx)(C,{}),(0,r.jsxs)("div",{className:"mt-4 rounded mx-4",children:["success"===i.status&&0==i.data.pages.length&&(0,r.jsx)(I.ub,{title:"Belum ada Aksi Nyata yang dikirimkan saat ini",description:"Kembali",children:(0,r.jsx)(I.Px,{onClick:function(){return c.back()},children:"Muat Ulang"})}),(0,r.jsxs)("div",{children:[!i.hasNextPage&&(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)(f.z,{type:"button",fullWidth:!0,size:"sm",onClick:Z,children:[(0,r.jsx)(x.J,{className:"mr-2",as:"i",color:"inverse",fontSize:"small",children:"refresh"}),"Perbaharui daftar aksi nyata"]})}),"success"===i.status&&i.data.pages.length>0&&i.data.pages.map(function(a,e){return(0,r.jsx)(d.Fragment,{children:a.data.map(function(a,e){var i=a.id,t=a.title,n=a.creator,l=a.topicId,d=a.topicName;return(0,r.jsx)(_,{href:"/pelatihan-mandiri/aksi-nyata/".concat(i,"?")+(0,s.stringify)({topik_name:d,topik_id:l}),title:t,avatarUrl:n.avatarUrl,author:n.name,email:n.email,topicId:l,topicName:d,order:e,aksiNyataId:i,active:c.query.id===String(i)},i)})},e)})]}),(0,r.jsx)(F,{}),i.hasNextPage&&(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)(f.z,{isLoading:i.isFetching||i.isFetchingNextPage,size:"lg",color:"black",fullWidth:!0,ref:p,onClick:function(){return i.fetchNextPage()},children:"Selanjutnya"})})]})]})]})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:"Pelatihan Mandiri | Daftar Aksi Nyata"})}),!(0,A.J8)()&&(0,r.jsx)(w.Z,{activeMenu:"aksi-nyata"}),(0,r.jsx)("div",{style:{height:"calc(100vh - 3.5rem)"},children:(0,r.jsxs)("div",{className:(0,m.Z)((0,A.J8)()?"pt-0":"pt-9"),children:[(0,r.jsx)(E,{}),(0,r.jsx)(C,{}),"success"===i.status&&0==i.data.pages.length&&(0,r.jsx)(I.ub,{title:"Belum ada Aksi Nyata yang dikirimkan saat ini",description:"Kembali",children:(0,r.jsx)(I.Px,{onClick:function(){return c.back()},children:"Muat Ulang"})}),(0,r.jsxs)("div",{className:"px-3 bg-gray-5",children:[!i.hasNextPage&&(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)(f.z,{type:"button",fullWidth:!0,size:"sm",onClick:Z,children:[(0,r.jsx)(x.J,{className:"mr-2",as:"i",color:"inverse",fontSize:"small",children:"refresh"}),"Perbaharui daftar aksi nyata"]})}),"success"===i.status&&i.data.pages.length>0&&i.data.pages.map(function(a,e){return(0,r.jsx)(d.Fragment,{children:a.data.map(function(a,e){var i=a.id,t=a.title,n=a.creator,l=a.topicId,d=a.topicName;return(0,r.jsx)(_,{href:"/pelatihan-mandiri/aksi-nyata/".concat(i,"?")+(0,s.stringify)({topik_name:d,topik_id:l}),title:t,avatarUrl:n.avatarUrl,author:n.name,email:n.email,topicId:l,topicName:d,order:e,aksiNyataId:i,active:c.query.id===i},i)})},e)})]}),(0,r.jsx)(F,{}),i.hasNextPage&&(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)(f.z,{isLoading:i.isFetching||i.isFetchingNextPage,size:"lg",color:"black",fullWidth:!0,ref:p,onClick:function(){return i.fetchNextPage()},children:"Selanjutnya"})})]})})]})}},55231:function(a,e,i){"use strict";i.d(e,{e:function(){return o}});var t=i(26042),n=i(69396),r=i(99534),s=i(85893),l=i(41664),d=i.n(l),c=i(84494),o=function(a){var e=a.href,i=a.children,l=(0,r.Z)(a,["href","children"]);return(0,c.ZP)().enabled?i&&"object"==typeof i&&"a"===i.type?(0,s.jsx)(s.Fragment,{children:i}):(0,s.jsx)("a",(0,n.Z)((0,t.Z)({href:e},l),{children:i})):(0,s.jsx)(d(),(0,n.Z)((0,t.Z)({href:e},l),{children:i}))}},70314:function(a){a.exports={"aksi-nyata-featured-card":"AksiNyataFeaturedItem_aksi-nyata-featured-card__v_6WV"}},58570:function(a){a.exports={"aksi-nyata-item-card":"AksiNyataListItem_aksi-nyata-item-card__xXhnL"}}}]);
//# sourceMappingURL=9103-0c9b480378ac763f.js.map